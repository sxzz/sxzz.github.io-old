<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸‰å’²æ™ºå­</title>
  <icon>https://blog.sxzz.moe/avatar.png</icon>
  
  <link href="https://blog.sxzz.moe/atom.xml" rel="self"/>
  
  <link href="https://blog.sxzz.moe/"/>
  <updated>2022-06-08T11:57:20.053Z</updated>
  <id>https://blog.sxzz.moe/</id>
  
  <author>
    <name>ä¸‰å’²æ™ºå­</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å›½äº§æµè§ˆå™¨å…¼å®¹æ€§</title>
    <link href="https://blog.sxzz.moe/chinese-browser-compatibility/"/>
    <id>https://blog.sxzz.moe/chinese-browser-compatibility/</id>
    <published>2022-06-07T16:00:00.000Z</published>
    <updated>2022-06-08T11:57:20.053Z</updated>
    
    <content type="html"><![CDATA[<ul><li>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ Chrome / Edge 79+</li><li>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ Firefox<ul><li><a href="https://www.mozilla.org/zh-CN/firefox/new/">https://www.mozilla.org/zh-CN/firefox/new/</a></li><li><a href="https://addons.mozilla.org/zh-CN/firefox/">https://addons.mozilla.org/zh-CN/firefox/</a></li></ul></li><li>â­ï¸â­ï¸â­ï¸â­ï¸ 360 æé€Ÿæµè§ˆå™¨ 21.0.1110.0<ul><li><code>Chromium 95</code> / <code>ES2022</code></li><li><a href="https://browser.360.cn/ee/">https://browser.360.cn/ee/</a></li></ul></li><li>â­ï¸â­ï¸â­ï¸ é¨æ¸¸æµè§ˆå™¨ 6.1.3.3000<ul><li><code>Chromium 88</code> / <code>ES2021</code></li><li><a href="https://www.maxthon.cn/">https://www.maxthon.cn/</a></li><li><a href="https://webstore.maxthon.cn/">https://webstore.maxthon.cn/</a></li></ul></li><li>â­ï¸â­ï¸â­ï¸ 360 å®‰å…¨æµè§ˆå™¨ 13.1.6000.0<ul><li><code>Chromium 86</code> / <code>ES2021</code></li><li><a href="https://browser.360.cn/">https://browser.360.cn/</a></li><li><a href="https://ext.chrome.360.cn/">https://ext.chrome.360.cn/</a></li></ul></li><li>â­ï¸â­ï¸ æœç‹—æµè§ˆå™¨ 11.0.1.34700 / 12.0.1.1125<ul><li>stable <code>Chromium 80</code>, <code>ES2020</code></li><li>beta <code>Chromium 87</code>, <code>ES2021</code></li><li><a href="https://ie.sogou.com/">https://ie.sogou.com/</a></li><li><a href="http://ie.sogou.com/app/">http://ie.sogou.com/app/</a></li></ul></li><li>â­ï¸â­ï¸ çŒè±¹æµè§ˆå™¨ 8.0.0.21681<ul><li><code>Chromium 79</code> / <code>ES2019</code></li><li><a href="https://www.liebao.cn/">https://www.liebao.cn/</a></li></ul></li><li>â­ï¸ QQ æµè§ˆå™¨ 10.7.0<ul><li><code>Chromium 70</code> / <code>ES2018</code></li><li><a href="https://browser.qq.com/">https://browser.qq.com/</a></li></ul></li><li>â­ï¸ 2345 åŠ é€Ÿæµè§ˆå™¨ 10.17<ul><li><code>Chromium 69</code> / <code>ES2018</code></li><li><a href="http://ie.2345.cc/">http://ie.2345.cc/</a></li><li><a href="http://extension.ie.2345.com/">http://extension.ie.2345.com/</a></li></ul></li><li>ğŸš« UC æµè§ˆå™¨<ul><li><code>Chromium</code> 55</li><li>å·²åœæ›´ã€æ— å®˜ç½‘</li></ul></li></ul><h2 id="å»ºè®®ç‰ˆæœ¬"><a href="#å»ºè®®ç‰ˆæœ¬" class="headerlink" title="å»ºè®®ç‰ˆæœ¬"></a>å»ºè®®ç‰ˆæœ¬</h2><p>å½“å‰å¹´ä»½ - 3 =&gt; 2022 - 3 = ES2019</p><ul><li>ES2020<ul><li>Chrome / Firefox / Edge 80</li><li>Safari 14.1</li><li>Opera 67</li><li>Safari 14.1</li><li>iOS 14.5</li></ul></li><li>ES2019<ul><li>Chrome 73,</li><li>Firefox 64</li><li>Edge 79</li><li>Safari 12.1</li><li>iOS 12.2</li></ul></li><li>ES2018<ul><li>Chrome 64</li><li>Firefox 78</li><li>Edge 79</li><li>Safari 12</li><li>iOS 12</li></ul></li></ul><h3 id="å¯èƒ½éœ€è¦è€ƒè™‘çš„-feature"><a href="#å¯èƒ½éœ€è¦è€ƒè™‘çš„-feature" class="headerlink" title="å¯èƒ½éœ€è¦è€ƒè™‘çš„ feature"></a>å¯èƒ½éœ€è¦è€ƒè™‘çš„ feature</h3><ul><li>âœ… ESM - Chrome 61</li><li>âœ… Dynamic import - Chrome 63</li><li>âœ… ResizeObserver - Chrome 64</li><li>âœ… AbortController - Chrome 66</li><li>âœ… AV1 video format - Chrome 70</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;ul&gt;
&lt;li&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ Chrome / Edge 79+&lt;/li&gt;
&lt;li&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ Firefox&lt;ul&gt;
&lt;li&gt;&lt;a</summary>
        
      
    
    
    
    
    <category term="web" scheme="https://blog.sxzz.moe/tags/web/"/>
    
    <category term="browser" scheme="https://blog.sxzz.moe/tags/browser/"/>
    
  </entry>
  
  <entry>
    <title>Element Plus æºç åˆ†æâ€”â€”æ„å»ºä¸ä»£ç é£æ ¼</title>
    <link href="https://blog.sxzz.moe/element-plus/"/>
    <id>https://blog.sxzz.moe/element-plus/</id>
    <published>2022-03-19T16:00:00.000Z</published>
    <updated>2022-03-31T05:08:14.227Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h2><ul><li>å®˜ç½‘ï¼š<a href="https://element-plus.org/">https://element-plus.org/</a></li><li>GitHub ä»“åº“ï¼š<a href="https://github.com/element-plus/element-plus">https://github.com/element-plus/element-plus</a></li><li>åŒ…ç®¡ç†ï¼š<a href="https://pnpm.io/workspaces">pnpm workspace</a></li><li>ç»„ä»¶ä»£ç ï¼š<a href="https://www.typescriptlang.org/">TypeScript</a>ã€<a href="https://vuejs.org/api/sfc-spec.html">Vue SFC</a>ï¼ˆVue å•æ–‡ä»¶ç»„ä»¶ï¼‰</li><li>æ ·å¼ï¼š<a href="https://sass-lang.com/">Scss</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/var">CSS var</a></li><li>å•å…ƒæµ‹è¯•ï¼š<a href="https://jestjs.io/">Jest</a>ã€<a href="https://vitest.dev/">Vitest</a></li><li>æ„å»ºï¼š<a href="https://rollupjs.org/">Rollup</a>ã€<a href="https://esbuild.github.io/">esbuild</a>ã€<a href="https://www.typescriptlang.org/">TypeScript</a>ã€<a href="https://gulpjs.com/">Gulp</a></li><li>ä»£ç é£æ ¼ï¼š<a href="https://eslint.org/">ESLint</a>ã€<a href="https://prettier.io/">Prettier</a></li></ul><p>æœ¬æ–‡ç« åŸºäº <a href="https://github.com/element-plus/element-plus/tree/2.1.4">Element Plus v2.1.4</a>ã€‚å¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p><h2 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h2><ul><li>Keywords: <code>Vue SFC</code>, <code>Rollup</code>, <code>Bundleless</code>, <code>TypeScript</code>, <code>ESM</code>, <code>CommonJS</code>/<code>CJS</code>, <code>UMD</code></li></ul><p>è¿™éƒ¨åˆ†åœ¨ä¸€ä¸ªå•ç‹¬çš„åŒ… <code>@element-plus/build</code>ï¼Œä»£ç ä½äº <a href="https://github.com/element-plus/element-plus/tree/2.1.4/internal/build"><code>/internal/build</code></a>ã€‚</p><p>ä½¿ç”¨åˆ°çš„å·¥å…·æœ‰ï¼š<code>rollup</code>ã€<code>unbuild</code>ã€<code>esbuild</code>ã€<code>gulp</code>ã€<code>ts-morph</code>ã€<code>fast-glob</code> ç­‰ã€‚å¦‚éœ€æ·±åº¦ç†è§£ï¼Œå»ºè®®å…ˆè‡ªè¡Œäº†è§£è¿™äº›åŒ…åé˜…è¯»æœ¬ç« èŠ‚ã€‚</p><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><h4 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">internal&#x2F;build</span><br><span class="line">â”œâ”€â”€ build.config.ts        # unbuild é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ dist                    # æ„å»ºäº§ç‰©</span><br><span class="line">â”œâ”€â”€ gulpfile.ts             # æ„å»ºè„šæœ¬</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ build-info.ts       # æ„å»ºä¿¡æ¯</span><br><span class="line">â”‚   â”œâ”€â”€ constants.ts        # ä¸€äº›å¸¸é‡</span><br><span class="line">â”‚   â”œâ”€â”€ index.ts            # å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ plugins             # æ’ä»¶</span><br><span class="line">â”‚   â”‚   â””â”€â”€ element-plus-alias.ts  # å¯¼å…¥åˆ«å</span><br><span class="line">â”‚   â”œâ”€â”€ tasks</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ full-bundle.ts  # æ„å»ºå®Œæ•´äº§ç‰©</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ helper.ts       # ç”Ÿæˆ WebStorm æç¤ºæ–‡ä»¶</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.ts</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ modules.ts      # æ„å»º bundleless äº§ç‰©</span><br><span class="line">â”‚   â”‚   â””â”€â”€ types-definitions.ts # ç”Ÿæˆ d.ts æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ type-safe.json      # ã€Œç±»å‹å®‰å…¨ã€åˆ—è¡¨</span><br><span class="line">â”‚   â””â”€â”€ utils               # å·¥å…·å‡½æ•°</span><br><span class="line">â”‚       â”œâ”€â”€ gulp.ts</span><br><span class="line">â”‚       â”œâ”€â”€ index.ts</span><br><span class="line">â”‚       â”œâ”€â”€ log.ts</span><br><span class="line">â”‚       â”œâ”€â”€ paths.ts</span><br><span class="line">â”‚       â”œâ”€â”€ pkg.ts</span><br><span class="line">â”‚       â”œâ”€â”€ process.ts</span><br><span class="line">â”‚       â””â”€â”€ rollup.ts</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ vue-jest-transformer.js</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºäº§ç‰©"><a href="#æ„å»ºäº§ç‰©" class="headerlink" title="æ„å»ºäº§ç‰©"></a>æ„å»ºäº§ç‰©</h4><p><a href="https://cdn.jsdelivr.net/npm/element-plus@latest/">åœ¨çº¿é¢„è§ˆ</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dist&#x2F;</span><br><span class="line">â”œâ”€â”€ element-plus         # æœ€ç»ˆæ„å»ºäº§ç‰©</span><br><span class="line">â”‚   â”œâ”€â”€ README.md</span><br><span class="line">â”‚   â”œâ”€â”€ attributes.json</span><br><span class="line">â”‚   â”œâ”€â”€ dist             # å®Œæ•´æ„å»ºäº§ç‰©</span><br><span class="line">â”‚   â”œâ”€â”€ es               # bundleless æ„å»ºäº§ç‰©ï¼ŒESM æ ¼å¼</span><br><span class="line">â”‚   â”œâ”€â”€ global.d.ts      # ä¾› Volar ä½¿ç”¨çš„å…¨å±€ç»„ä»¶ç±»å‹</span><br><span class="line">â”‚   â”œâ”€â”€ lib              # bundleless æ„å»ºäº§ç‰©ï¼ŒCJS æ ¼å¼</span><br><span class="line">â”‚   â”œâ”€â”€ package.json</span><br><span class="line">â”‚   â”œâ”€â”€ tags.json</span><br><span class="line">â”‚   â”œâ”€â”€ theme-chalk      # æ ·å¼äº§ç‰©</span><br><span class="line">â”‚   â””â”€â”€ web-types.json</span><br><span class="line">â””â”€â”€ types                # ç±»å‹å£°æ˜äº§ç‰©</span><br></pre></td></tr></table></figure><h3 id="æ„å»ºæµç¨‹"><a href="#æ„å»ºæµç¨‹" class="headerlink" title="æ„å»ºæµç¨‹"></a>æ„å»ºæµç¨‹</h3><p>é¦–å…ˆå¯ä»¥çœ‹åˆ°åœ¨ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/package.json"><code>package.json</code></a> æ–‡ä»¶ä¸­çš„ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/package.json#L10"><code>start</code></a> è„šæœ¬ï¼Œå¯åŠ¨ Gulp è¿è¡Œ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/gulpfile.ts"><code>gulpfile.ts</code></a> æ–‡ä»¶ã€‚è¿™å°†è¿è¡Œ <code>gulpfile</code> çš„é»˜è®¤å¯¼å‡ºã€‚åœ¨ <code>gulpfile.ts</code> æ–‡ä»¶ä¸­æ‰¾åˆ° <code>export default</code> <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/gulpfile.ts#L49-L67">ç›¸å…³ä»£ç </a>å°±æ˜¯æ„å»ºæµç¨‹äº†ã€‚</p><h4 id="0-clean-æ¸…ç†äº§ç‰©"><a href="#0-clean-æ¸…ç†äº§ç‰©" class="headerlink" title="0. clean æ¸…ç†äº§ç‰©"></a>0. <code>clean</code> æ¸…ç†äº§ç‰©</h4><p>è°ƒç”¨ä¸€ä¸ª <code>run</code> å‡½æ•°ï¼Œå°†ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ <code>pnpm run clean</code>ï¼Œå…¶ä½œç”¨ä¸ºåˆ é™¤æ ¹ç›®å½•ä¸‹çš„ <code>dist</code> æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”è¿è¡Œ <code>/packages</code> ç›®å½•ä¸‹æ¯ä¸ªåŒ…çš„ <code>clean</code> è„šæœ¬ã€‚</p><h4 id="1-createOutput-åˆ›å»ºæ„å»ºäº§ç‰©çš„ç›®å½•"><a href="#1-createOutput-åˆ›å»ºæ„å»ºäº§ç‰©çš„ç›®å½•" class="headerlink" title="1. createOutput åˆ›å»ºæ„å»ºäº§ç‰©çš„ç›®å½•"></a>1. <code>createOutput</code> åˆ›å»ºæ„å»ºäº§ç‰©çš„ç›®å½•</h4><p>åˆ›å»º <code>/dist/element-plus</code> æ–‡ä»¶å¤¹ã€‚åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬æŠŠ <code>dist</code> ç›®å½•æ•´ä¸ªåˆ æ‰äº†ï¼Œä¸ºäº†ä¿è¯ç›®å½•å­˜åœ¨ï¼Œéœ€è¦æŠŠä¹‹å‰çš„ <code>dist</code> ç›®å½•åˆ›å»ºå›æ¥ã€‚</p><h4 id="2-parallel"><a href="#2-parallel" class="headerlink" title="2. parallel"></a>2. <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/gulpfile.ts#L53">parallel</a></h4><p>è¿™æ˜¯å¤šä¸ªå¹¶è¡Œçš„ä»»åŠ¡ï¼Œå› ä¸ºæ„å»ºæ¯ç§ä¸åŒç±»å‹çš„äº§ç‰©æ˜¯å¯ä»¥åŒæ—¶è¿›è¡Œçš„ã€‚</p><h4 id="2-1-buildModules-æ„å»º-Bundless-äº§ç‰©"><a href="#2-1-buildModules-æ„å»º-Bundless-äº§ç‰©" class="headerlink" title="2.1 buildModules æ„å»º Bundless äº§ç‰©"></a>2.1 <code>buildModules</code> æ„å»º Bundless äº§ç‰©</h4><p>å°†å¼€å¯ä¸€ä¸ªæ–°è¿›ç¨‹å¼€å§‹æ‰§è¡Œ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/modules.ts"><code>./src/tasks/modules.ts</code></a> ä¸­çš„ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/modules.ts#L22"><code>buildModules</code></a> å‡½æ•°ã€‚æœ€åå°†åœ¨ <code>/dist/element-plus</code> ä¸‹ç”Ÿæˆ <code>es</code> ä¸ <code>lib</code> ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«ä¸º ESM ä¸ CJS ä¸¤ç§æ ¼å¼ã€‚</p><h4 id="2-2-buildFullBundle-æ„å»ºå®Œæ•´äº§ç‰©"><a href="#2-2-buildFullBundle-æ„å»ºå®Œæ•´äº§ç‰©" class="headerlink" title="2.2 buildFullBundle æ„å»ºå®Œæ•´äº§ç‰©"></a>2.2 <code>buildFullBundle</code> æ„å»ºå®Œæ•´äº§ç‰©</h4><p>ä¸ä¸Šä¸€æ­¥ç±»ä¼¼ï¼Œå°†æ‰§è¡Œ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts"><code>./src/tasks/full-bundle.ts</code></a> ä¸­çš„ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts#L138"><code>buildFullBundle</code></a> å‡½æ•°ã€‚ä½†è¿™æ­¥æ¯”ä¸Šä¸€æ­¥å¤šä¸€ä¸ª<a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts#L88">æ„å»º <code>locale</code></a>ï¼Œå› ä¸ºéœ€è¦è€ƒè™‘åœ¨ CDN åœºæ™¯ä¸‹å¯¼å…¥ä¸åŒè¯­è¨€ã€‚å¦å¤–ï¼Œç”¨æˆ·å¯¼å…¥å®Œæ•´åŒ…å¯ä»¥ä¸éœ€è¦ä½¿ç”¨æ„å»ºå·¥å…· ï¼ˆViteã€Webpack ç­‰ï¼‰ï¼Œéœ€è¦æˆ‘ä»¬éœ€è¦è¿˜éœ€è¦æä¾›å‹ç¼©ç‰ˆæœ¬ï¼Œä»¥ä¾¿èƒ½å¤ŸèŠ‚çœåŠ è½½æ—¶é—´ã€‚</p><p><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts#L135"><code>buildFull</code></a> å‡½æ•°å°±æä¾›äº†ä¸€ä¸ªå‚æ•° <code>minify</code>ï¼Œä»¥ä¾¿å¯ä»¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªä»»åŠ¡â€”â€”ä¸€ä¸ªå‹ç¼©ç‰ˆæœ¬å’Œä¸€ä¸ªä¸å‹ç¼©çš„ç‰ˆæœ¬ã€‚</p><p><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts#L30"><code>buildFullEntry</code></a> å‡½æ•°å°±æ˜¯æ„å»ºå®Œæ•´äº§ç‰©çš„å‡½æ•°ã€‚é™¤äº†æ²¡æœ‰ä½¿ç”¨ <code>preserveModules</code> é€‰é¡¹ï¼Œä¸ <code>buildModules</code> åŸºæœ¬ä¸€è‡´ã€‚æä¾›äº† UMD ä¸ ESM ä¸¤ç§æ ¼å¼ã€‚</p><p><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/full-bundle.ts#L88"><code>buildFullLocale</code></a> å‡½æ•°ç”¨æ¥æ„å»ºè¯­è¨€åŒ…ã€‚ä¸º <code>packages/locale/**/*.ts</code> ä¸‹çš„æ¯ä¸ªæ–‡ä»¶åŒæ—¶æ„å»º UMD ä¸ ESM ä¸¤ç§æ ¼å¼çš„äº§ç‰©ã€‚</p><p>åŒæ—¶ï¼Œå¼€å¯ <code>minify</code> å‚æ•°æ—¶ä¼šå¼€å¯ <code>sourceMap</code> é€‰é¡¹ï¼Œä¸ºå¼€å‘æ—¶æä¾›åŸå§‹æºç ç”¨æ¥è°ƒè¯•ã€‚</p><h4 id="2-3-generateTypesDefinitions-ç”Ÿæˆ-d-ts-æ–‡ä»¶"><a href="#2-3-generateTypesDefinitions-ç”Ÿæˆ-d-ts-æ–‡ä»¶" class="headerlink" title="2.3 generateTypesDefinitions ç”Ÿæˆ .d.ts æ–‡ä»¶"></a>2.3 <code>generateTypesDefinitions</code> ç”Ÿæˆ <code>.d.ts</code> æ–‡ä»¶</h4><p>ä¸ºäº†ç”¨æˆ·å¼€å‘æ—¶æä¾›ç±»å‹æ”¯æŒï¼Œè¿˜éœ€è¦åŒæ—¶ç”Ÿæˆ <code>.d.ts</code>ã€‚å°†æ‰§è¡Œ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts"><code>./src/tasks/types-definitions.ts</code></a> ä¸­çš„ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts#L34"><code>generateTypesDefinitions</code></a> å‡½æ•°ã€‚æœ€åå°† <code>.d.ts</code> å†™å…¥åˆ° <code>/dist/types</code> ç›®å½•ä¸­ã€‚</p><h4 id="2-4-buildHelper-ç”Ÿæˆ-IDE-æ”¯æŒ"><a href="#2-4-buildHelper-ç”Ÿæˆ-IDE-æ”¯æŒ" class="headerlink" title="2.4 buildHelper ç”Ÿæˆ IDE æ”¯æŒ"></a>2.4 <code>buildHelper</code> ç”Ÿæˆ IDE æ”¯æŒ</h4><p>å¯¹äº WebStorm ä¸ Veturï¼Œéœ€è¦ç”Ÿæˆ <code>web-types.json</code> ä¸ <code>tags.json</code>ã€<code>attributes.json</code> æ–‡ä»¶ä¾›æ’ä»¶åˆ†æï¼Œæœ€ç»ˆæä¾›ä»£ç æç¤ºã€‚ä½¿ç”¨äº† <a href="https://github.com/tolking/components-helper">components-helper</a> åˆ†ææ–‡æ¡£ Markdown ç”Ÿæˆã€‚</p><p>å¼€å‘ Vue 3 åº”ç”¨è¿˜æ˜¯æ¨èä½¿ç”¨ VSCode + Volarï¼Œè¿™éƒ¨åˆ†å¯èƒ½ä»¥åä¼šè¢«ç§»é™¤ã€‚å› ä¸ºç”¨æ–‡æ¡£ç”Ÿæˆä¸Šè¿°æ–‡ä»¶å¹¶ä¸å¯é ã€‚</p><h4 id="2-5-buildThemeChalk-copyFullStyle-æ„å»ºå¹¶å¤åˆ¶æ ·å¼"><a href="#2-5-buildThemeChalk-copyFullStyle-æ„å»ºå¹¶å¤åˆ¶æ ·å¼" class="headerlink" title="2.5 buildThemeChalk copyFullStyle æ„å»ºå¹¶å¤åˆ¶æ ·å¼"></a>2.5 <code>buildThemeChalk</code> <code>copyFullStyle</code> æ„å»ºå¹¶å¤åˆ¶æ ·å¼</h4><p><code>buildThemeChalk</code>ï¼šè¿™æ­¥å°†å…ˆæ‰§è¡Œ <code>buildThemeChalk</code>ï¼Œä» Sass æºä»£ç æ„å»ºä¸º CSS äº§ç‰©ã€‚ç›¸å…³ä»£ç ä½äº <a href="https://github.com/element-plus/element-plus/blob/2.1.4/packages/theme-chalk/gulpfile.ts"><code>packages/theme-chalk/gulpfile.ts</code></a>ã€‚æœ€ç»ˆæŠŠäº§ç‰©ä» <code>packages/theme-chalk/dist</code> å¤åˆ¶åˆ° <code>dist/element-plus/theme-chalk</code>ã€‚</p><p><code>copyFullStyle</code>ï¼šå°†å¤åˆ¶ <code>dist/element-plus/theme-chalk/index.css</code> åˆ° <code>dist/element-plus/dist/index.css</code>ã€‚æŠŠå®Œæ•´çš„ CSS æ ·å¼å¤åˆ¶åˆ°ã€Œå®Œæ•´æ„å»ºäº§ç‰©ã€çš„ç›®å½•ä¸­ï¼Œæ–¹ä¾¿ CDN å¼•å…¥ã€‚</p><h4 id="3-copyTypesDefinitions-å¤åˆ¶-d-ts-æ–‡ä»¶"><a href="#3-copyTypesDefinitions-å¤åˆ¶-d-ts-æ–‡ä»¶" class="headerlink" title="3. copyTypesDefinitions å¤åˆ¶ .d.ts æ–‡ä»¶"></a>3. <code>copyTypesDefinitions</code> å¤åˆ¶ <code>.d.ts</code> æ–‡ä»¶</h4><p>å› ä¸ºæœ‰ ESM ä¸ CJS ä¸¤ç§æ ¼å¼éƒ½éœ€è¦ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸€å¼€å§‹å°±ç”Ÿæˆåˆ°ã€Œæœ€ç»ˆæ„å»ºäº§ç‰©ã€ç›®å½•ã€‚æœ€åå°†ã€Œç±»å‹å£°æ˜äº§ç‰©ã€çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° <code>dist/element-plus/es</code> ä¸ <code>dist/element-plus/lib</code> ä¸­å³å¯ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æ‰€æœ‰æµç¨‹ã€‚</p><h3 id="Rollup-æ’ä»¶"><a href="#Rollup-æ’ä»¶" class="headerlink" title="Rollup æ’ä»¶"></a>Rollup æ’ä»¶</h3><p>ã€Œå®Œæ•´æ„å»ºäº§ç‰©ã€ä¸ã€Œbundleless æ„å»ºäº§ç‰©ã€éƒ½ä½¿ç”¨åˆ°äº† Rollupã€‚</p><p>Rollup æ˜¯ä¸èƒ½è§£æåƒ TypeScriptã€Vue SFC è¿™äº›é JavaScript çš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©å„ç§æ’ä»¶ï¼Œæ¥å¸®åŠ© Rollup å°†å…¶è½¬æ¢ä¸º JavaScript ä»£ç ã€‚Rollup ä¹Ÿä¸èƒ½è§£æ CommonJS æ ¼å¼çš„ä»£ç ï¼Œè¿˜éœ€è¦æ’ä»¶æ¥å¸®åŠ© Rollup è§£å†³è¿™äº›é—®é¢˜ã€‚</p><h4 id="unplugin-vue-define-options"><a href="#unplugin-vue-define-options" class="headerlink" title="unplugin-vue-define-options"></a><a href="https://github.com/sxzz/unplugin-vue-define-options"><code>unplugin-vue-define-options</code></a></h4><p>è¿™æ˜¯æˆ‘ä¸ªäººå†™çš„ä¸€ä¸ªæ’ä»¶ã€‚é€šè¿‡è¿™ä¸ªæ’ä»¶å°±å¯ä»¥åœ¨ Vue çš„ <code>&lt;script setup&gt;</code> ä¸­ä½¿ç”¨ <code>Options API</code> ã€‚Element Plus éœ€è¦å®šä¹‰ç»„ä»¶ <code>name</code> å±æ€§ï¼Œè¿™ä¸ªå°±å¯ä»¥é¿å…ä¸¤ä¸ª <code>script</code> æ ‡ç­¾äº†ã€‚</p><h4 id="vitejs-plugin-vue"><a href="#vitejs-plugin-vue" class="headerlink" title="@vitejs/plugin-vue"></a><a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue"><code>@vitejs/plugin-vue</code></a></h4><p>Vite å®˜æ–¹æ’ä»¶ï¼ŒæŠŠ Vue SFC ç¼–è¯‘ä¸º JavaScript ä»£ç ã€‚</p><h4 id="vitejs-plugin-vue-jsx"><a href="#vitejs-plugin-vue-jsx" class="headerlink" title="@vitejs/plugin-vue-jsx"></a><a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx"><code>@vitejs/plugin-vue-jsx</code></a></h4><p>Vite å®˜æ–¹æ’ä»¶ï¼Œæ”¯æŒ Vue JSX è¯­æ³•ã€‚</p><h4 id="rollup-plugin-node-resolve"><a href="#rollup-plugin-node-resolve" class="headerlink" title="@rollup/plugin-node-resolve"></a><a href="https://github.com/rollup/plugins/tree/master/packages/node-resolve"><code>@rollup/plugin-node-resolve</code></a></h4><p>Rollup å®˜æ–¹æ’ä»¶ï¼Œè®© Rollup æ”¯æŒ Node.js çš„<a href="https://nodejs.org/api/modules.html#modules_all_together">è§£æç®—æ³•</a>ï¼Œç”¨äºè§£æ <code>node_modules</code>ã€‚</p><p><code>extensions</code> é€‰é¡¹ï¼šé»˜è®¤æ˜¯ä¸åŒ…å« <code>.ts</code> åç¼€åçš„ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åŠ ä¸Šã€‚</p><h4 id="rollup-plugin-commonjs"><a href="#rollup-plugin-commonjs" class="headerlink" title="@rollup/plugin-commonjs"></a><a href="https://github.com/rollup/plugins/tree/master/packages/commonjs"><code>@rollup/plugin-commonjs</code></a></h4><p>Rollup å®˜æ–¹æ’ä»¶ï¼Œç”¨äºå°† CommonJS æ¨¡å—è½¬æ¢ä¸º ES6ï¼Œè¿™æ ·å°±å¯ä»¥è¢« Rollup è§£æã€‚</p><h4 id="rollup-plugin-esbuild"><a href="#rollup-plugin-esbuild" class="headerlink" title="rollup-plugin-esbuild"></a><a href="https://github.com/egoist/rollup-plugin-esbuild"><code>rollup-plugin-esbuild</code></a></h4><p>ä¸€ä¸ªå¼ºå¤§ã€é«˜æ•ˆã€å¥½ç”¨çš„æ’ä»¶ï¼ç”¨äºæŠŠ TypeScript è½¬æ¢ä¸º JavaScriptï¼Œå¹¶å¯ä»¥ç”¨äºå‹ç¼©ä»£ç ã€è½¬æ¢è¯­æ³•ã€‚åŸºäº <a href="https://esbuild.github.io/">ESBuild</a>ï¼Œé€Ÿåº¦æå¿«ã€‚</p><p><code>minify</code> é€‰é¡¹ï¼šæ˜¯å¦å‹ç¼©ä»£ç ã€‚</p><p><code>target</code> é€‰é¡¹ï¼šå‘ä¸‹å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚Element Plus æœ€ä½å…¼å®¹ <code>ES2018</code>ï¼Œä½†åœ¨å¼€å‘ä¸­ä¼šä½¿ç”¨åˆ°ä¸€äº›æ–°è¯­æ³•ï¼ˆæ¯”å¦‚ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Optional_chaining">Optional chaining</a> ç­‰ï¼‰ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ© ESBuild çš„èƒ½åŠ›ï¼ŒæŠŠè¯­æ³•ç³–è½¬æ¢ä¸ºèƒ½å…¼å®¹ ES2018 çš„ä»£ç ã€‚</p><p><code>loaders</code> é€‰é¡¹ï¼šé€šè¿‡ <code>@vitejs/plugin-vue</code> æ’ä»¶ç¼–è¯‘åï¼ŒVue SFC å°±æ˜¯æ™®é€šçš„ JavaScript ä»£ç äº†ï¼Œä½†æ˜¯å…¶åç¼€è¿˜æ˜¯ <code>.vue</code> ã€‚æ‰€ä»¥éœ€è¦æ·»åŠ  <code>&#39;.vue&#39;: &#39;ts&#39;,</code>ï¼ŒæŠŠ <code>.vue</code> æ–‡ä»¶çœ‹ä½œæ™®é€šçš„ <code>.js</code> æ–‡ä»¶ã€‚</p><h3 id="Rollup-é…ç½®"><a href="#Rollup-é…ç½®" class="headerlink" title="Rollup é…ç½®"></a>Rollup é…ç½®</h3><h4 id="external"><a href="#external" class="headerlink" title="external"></a><a href="https://esbuild.github.io/api/#external"><code>external</code></a></h4><p>å½“æ„å»º bundless æ—¶ï¼Œå°† <code>dependencies</code> å’Œ <code>peerDependencies</code> æ’é™¤åœ¨æ„å»ºäº§ç‰©ä¹‹å¤–ã€‚</p><p>å½“æ„å»ºå®Œæ•´äº§ç‰©æ—¶ï¼Œå°† <code>peerDependencies</code> ï¼ˆä¹Ÿå°±æ˜¯ <code>vue</code>ï¼‰æ’é™¤åœ¨æ„å»ºäº§ç‰©ä¹‹å¤–ã€‚</p><h4 id="preserveModules"><a href="#preserveModules" class="headerlink" title="preserveModules"></a><a href="https://rollupjs.org/guide/en/#outputpreservemodules"><code>preserveModules</code></a></h4><p>å¼€å¯åï¼Œæ„å»ºäº§ç‰©å°†ä¿æŒä¸æºç ä¸€æ ·çš„æ–‡ä»¶ç»“æ„ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºä»…æŠŠ Vue SFCã€TypeScript ç­‰è½¬æ¢æˆäº† JavaScript ä»£ç ï¼Œå…¶ä»–ä¸å˜ã€‚</p><h3 id="å…¶ä»–ä»£ç "><a href="#å…¶ä»–ä»£ç " class="headerlink" title="å…¶ä»–ä»£ç "></a>å…¶ä»–ä»£ç </h3><h4 id="build-config-ts"><a href="#build-config-ts" class="headerlink" title="build.config.ts"></a><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/build.config.ts"><code>build.config.ts</code></a></h4><p>ä½¿ç”¨ <a href="https://github.com/unjs/unbuild">unbuild</a> ç”Ÿæˆå¼€å‘æ—¶ stubï¼Œå¼€å‘è°ƒè¯•ç”¨ã€‚è¿™æ ·å°±ä¸ç”¨ watch ä¸€ç›´ç›‘å¬æ–‡ä»¶æ„å»ºã€‚</p><h4 id="src-type-safe-json"><a href="#src-type-safe-json" class="headerlink" title="src/type-safe.json"></a><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/type-safe.json"><code>src/type-safe.json</code></a></h4><p>å› ä¸º Element Plus çš„ä»£ç ç›®å‰è¿˜æœ‰ TypeScript ç±»å‹äº§ç‰©ï¼Œä½†å·²ç»é‡æ„å®Œæˆäº†éƒ¨åˆ†æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯è®°å½•å·²é‡æ„å®Œæˆçš„åˆ—è¡¨ã€‚ä¸ºäº†åœ¨ç”Ÿæˆ <code>.d.ts</code> æ˜¯é’ˆå¯¹è¿™éƒ¨åˆ†æ–‡ä»¶åšå¼‚å¸¸å¤„ç†ã€‚</p><h4 id="src-build-info-ts"><a href="#src-build-info-ts" class="headerlink" title="src/build-info.ts"></a><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/build-info.ts"><code>src/build-info.ts</code></a></h4><p>å°†æ„å»ºçš„é…ç½®é›†ä¸­å†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬è·¯å¾„ã€æ„å»ºæ ¼å¼ã€åç¼€åç­‰ã€‚</p><h4 id="src-constants-ts"><a href="#src-constants-ts" class="headerlink" title="src/constants.ts"></a><a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/constants.ts"><code>src/constants.ts</code></a></h4><p>ä¸€äº›å¸¸é‡ã€‚å¦‚æœæƒ³è‡ªè¡Œæ„å»ºå¹¶ä¿®æ”¹ä¸€äº›å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹æ­¤æ–‡ä»¶ã€‚</p><h4 id="src-plugins-element-plus-alias-ts"><a href="#src-plugins-element-plus-alias-ts" class="headerlink" title="src/plugins/element-plus-alias.ts"></a><code>src/plugins/element-plus-alias.ts</code></h4><p>è§£ææ ·å¼å¯¼å…¥çš„è·¯å¾„ã€‚æŠŠ <code>&quot;@element-plus/theme-chalk&quot;</code> æ›¿æ¢ä¸º <code>&quot;element-plus/theme-chalk&quot;</code>ã€‚</p><h3 id="ç”Ÿæˆ-d-ts-ç±»å‹å®šä¹‰"><a href="#ç”Ÿæˆ-d-ts-ç±»å‹å®šä¹‰" class="headerlink" title="ç”Ÿæˆ .d.ts ç±»å‹å®šä¹‰"></a>ç”Ÿæˆ <code>.d.ts</code> ç±»å‹å®šä¹‰</h3><p>ä»£ç ä½äºåœ¨ <code>generateTypesDefinitions</code> æ­¥éª¤ä¸­ã€‚è¿™é‡Œä½¿ç”¨äº† <code>ts-morph</code> ç®€åŒ– TypeScript ç¼–è¯‘è°ƒç”¨ã€‚é¦–å…ˆ<a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts#L35-L51">åˆ›å»ºä¸€ä¸ª <code>Project</code></a> å¹¶æŒ‡å®šé…ç½®ï¼Œç”¨äºè¦†ç›– <code>tsconfig.json</code> çš„é…ç½®ã€‚<code>skipAddingFilesFromTsConfig</code> è®¾ç½®ä¸º <code>false</code> çš„ç›®çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é€‰æ‹©æ–‡ä»¶åˆ°ç¼–è¯‘å™¨ä¸­ã€‚<a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts#L53-L60">é€šè¿‡ <code>glob</code> åŒ¹é…æ‰€æœ‰æºç æ–‡ä»¶</a>ï¼Œå¹¶<a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts#L61-L66">è¿‡æ»¤æ‰ä»…ç”¨äºæµ‹è¯•ä¸å¼€å‘çš„æ–‡ä»¶</a>ã€‚è·å–åˆ°æ–‡ä»¶åˆ—è¡¨åï¼Œéœ€è¦æŠŠæ–‡ä»¶æ·»åŠ åˆ° TypeScript ç¼–è¯‘å™¨ä¸­ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ Vue SFC ä¸å¯ä»¥ç›´æ¥æ·»åŠ åˆ°ç¼–è¯‘å™¨ä¸­ï¼Œå› ä¸º TypeScript æ— æ³•è§£æå®ƒã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>vue/compiler-sfc</code> ä¸­çš„ <code>parse</code> å’Œ <code>compileScript</code> æŠŠ <code>script</code> å—ä¸­çš„ä»£ç æå–å‡ºæ¥ï¼Œå¹¶ç¼–è¯‘ <code>&lt;script setup&gt;</code> çš„ä»£ç ã€‚ä¹‹åå†æ·»åŠ åˆ°ç¼–è¯‘å™¨ä¸­ã€‚</p><p>å¦å¤–ï¼Œç”±äºæ„å»ºäº§ç‰©çš„ç›®å½•ç»“æ„ä¸æˆ‘ä»¬å®é™…çš„æºç ç›®å½•ç»“æ„ä¸ä¸€æ ·ã€‚æ‰€ä»¥è¿™é‡Œè¦ç‰¹æ®Šå¤„ç†ä¸‹â€”â€”<a href="https://github.com/element-plus/element-plus/blob/2.1.4/internal/build/src/tasks/types-definitions.ts#L97-L102">æ‰‹åŠ¨è¯»å–æ–‡ä»¶å†…å®¹å¹¶æ·»åŠ åˆ°ç¼–è¯‘å™¨ä¸­</a>ã€‚</p><p>è¿˜éœ€è¦å·¥å…·ã€Œç±»å‹å®‰å…¨ã€åˆ—è¡¨ä¸­çš„æ–‡ä»¶è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåˆ—è¡¨ä¸­çš„æ–‡ä»¶æœ‰ç±»å‹é”™è¯¯ï¼Œåˆ™ç›´æ¥æŠ¥é”™ã€‚å¯ä»¥é˜²æ­¢æ„å¤–é€ æˆçš„ TypeScript é”™è¯¯ã€‚åç»­å°†é™†ç»­å®Œæˆä»£ç é‡æ„ï¼Œä¿è¯ 0 TypeScript é”™è¯¯ã€‚</p><p>æœ€åå°±æ˜¯æŠŠç¼–è¯‘å¥½çš„ <code>.d.ts</code> æ–‡ä»¶å†™å…¥åˆ°æ„å»ºç›®å½•å³å¯ã€‚</p><h3 id="æœªæ¥"><a href="#æœªæ¥" class="headerlink" title="æœªæ¥"></a>æœªæ¥</h3><p>æˆ‘å†™äº†ä¸€ä¸ª<a href="https://github.com/sxzz/element-plus-next/tree/main/packages/build-cli">æ–°çš„æ„å»ºæµç¨‹</a>ï¼Œå°†æ¥å¯èƒ½åœ¨ Element Plus 3 ä¸­ä½¿ç”¨åˆ°ã€‚å…¨ç¨‹ä½¿ç”¨ ESBuild æ„å»ºï¼Œé€Ÿåº¦åº”è¯¥ä¼šå¿«å¾ˆå¤šã€‚å¦å¤–ï¼Œæœªæ¥å¯èƒ½å°†åªæ„å»º ESM å’Œ IIFE æ ¼å¼çš„ç‰ˆæœ¬ã€‚å› æ­¤ï¼ŒBundleless æ„å»ºäº§ç‰©ä¹Ÿå¯ä»¥å»æ‰ã€‚</p><h2 id="ä»£ç é£æ ¼"><a href="#ä»£ç é£æ ¼" class="headerlink" title="ä»£ç é£æ ¼"></a>ä»£ç é£æ ¼</h2><p>è¿™éƒ¨åˆ†åœ¨ä¸€ä¸ªå•ç‹¬çš„åŒ… <code>@element-plus/eslint-config</code>ï¼Œä»£ç ä½äº <a href="https://github.com/element-plus/element-plus/tree/2.1.4/internal/eslint-config"><code>/internal/eslint-config</code></a>ã€‚</p><p>å¦‚æœæƒ³ç»™ Element Plus è´¡çŒ®ä»£ç ï¼Œè¯·åŠ¡å¿…ç¡®ä¿ä»£ç é£æ ¼æ²¡æœ‰é—®é¢˜ã€‚å¯ä»¥è¿è¡Œ <code>pnpm run lint</code> æ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼Œå¹¶ä½¿ç”¨ <code>pnpm run lint:fix</code> è‡ªåŠ¨ä¿®å¤é—®é¢˜ã€‚</p><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><p>Element Plus ä½¿ç”¨ ESLint æ¥ç®¡ç†ä»£ç é£æ ¼ï¼ŒåŒæ—¶ä½¿ç”¨äº†å¤šä¸ªæ’ä»¶æ¥æ”¯æŒä¸åŒçš„æ–‡ä»¶ç±»å‹ã€‚æ”¯æŒçš„æ–‡ä»¶ç±»å‹æœ‰ï¼šJavaScriptã€TypeScriptã€JSX/TSXã€Vue SFCã€Markdownã€JSONã€JSON5ï¼Œè¯¦è§ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/.vscode/settings.json#L17-L27"><code>.vscode/settings.json</code></a> çš„é…ç½®é¡¹ <code>eslint.validate</code>ã€‚</p><h3 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h3><p>æ€»ä½“ä¸Šä½¿ç”¨ Prettier æ¥çº¦æŸä»£ç é£æ ¼ï¼Œè¯¦è§ <a href="https://github.com/element-plus/element-plus/blob/2.1.4/.prettierrc">Prettier é…ç½®æ–‡ä»¶</a>ã€‚å¹¶ä½¿ç”¨ Prettier æ’ä»¶å’Œé¢„è®¾è§„åˆ™ä¸ ESLint é›†æˆã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>å…¶ä»–ä»£ç éƒ¨åˆ†å°†åœ¨åç»­æ›´æ–°ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;é¡¹ç›®æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#é¡¹ç›®æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®æ¦‚è¿°&quot;&gt;&lt;/a&gt;é¡¹ç›®æ¦‚è¿°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å®˜ç½‘ï¼š&lt;a</summary>
        
      
    
    
    
    
    <category term="web" scheme="https://blog.sxzz.moe/tags/web/"/>
    
    <category term="element-plus" scheme="https://blog.sxzz.moe/tags/element-plus/"/>
    
  </entry>
  
  <entry>
    <title>acme.sh å…è´¹ç”³è¯· HTTPS è¯ä¹¦</title>
    <link href="https://blog.sxzz.moe/acme-sh/"/>
    <id>https://blog.sxzz.moe/acme-sh/</id>
    <published>2018-07-05T22:00:31.000Z</published>
    <updated>2022-03-30T04:20:50.906Z</updated>
    
    <content type="html"><![CDATA[<p>æœåŠ¡å™¨ç¯å¢ƒï¼šUbuntu 16.04 + Nginx</p><a id="more"></a><h2 id="å®‰è£…-acme-sh"><a href="#å®‰è£…-acme-sh" class="headerlink" title="å®‰è£… acme.sh"></a>å®‰è£… acme.sh</h2><p>å› ä¸ºè‡ªåŠ¨éœ€è¦ç»­æœŸéœ€è¦é‡å¯ nginxï¼Œå»ºè®®ä½¿ç”¨ root ç”¨æˆ·å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh | sh</span><br></pre></td></tr></table></figure><p>ç„¶åå†é‡è½½ä¸€ä¸‹ <code>.bashrc</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h2 id="ç”³è¯·è¯ä¹¦"><a href="#ç”³è¯·è¯ä¹¦" class="headerlink" title="ç”³è¯·è¯ä¹¦"></a>ç”³è¯·è¯ä¹¦</h2><p>å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼éªŒè¯ï¼šHTTP å’Œ DNS éªŒè¯ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯åè€…ã€‚ä¸‹é¢ä¸»è¦ä»‹ç» DNS éªŒè¯ã€‚</p><blockquote><p><strong>acme.sh</strong> ç›®å‰æ”¯æŒ cloudflareã€dnspodã€cloudxnsã€godaddy ä»¥åŠ ovh ç­‰æ•°åç§è§£æå•†çš„è‡ªåŠ¨é›†æˆã€‚</p></blockquote><p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ DNSPodï¼Œç™»å½• DNSPodï¼Œåœ¨ <a href="https://www.dnspod.cn/console/user/security">å®‰å…¨è®¾ç½®</a> é‡Œé¢æ–°å»ºä¸€ä¸ª API TOKENã€‚</p><p>åˆ›å»ºå¥½äº†ç„¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DP_Id=<span class="string">&quot;ID&quot;</span></span><br><span class="line"><span class="built_in">export</span> DP_Key=<span class="string">&quot;Token&quot;</span></span><br><span class="line"></span><br><span class="line">acme.sh --issue --dns dns_dp -d &lt;domain&gt; -d *.&lt;domain&gt; <span class="comment"># æœ‰å¤šä¸ªå­åŸŸåå¯ä»¥å†™å¤šä¸ª-d &lt;domain&gt;.com</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†ç­‰å¾… TXT è®°å½•ç”Ÿæ•ˆï¼Œå¯èƒ½è¦ç­‰å¾… 120 ç§’å·¦å³ã€‚</p><p>ç”Ÿæˆå¥½äº†ä¹‹åï¼ŒID å’Œ Token ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡å†ä½¿ç”¨ DNSPod çš„æ—¶å€™å°±ä¸ç”¨æŒ‡å®šï¼Œç›´æ¥ç”Ÿæˆå°±å¥½äº†ã€‚</p><h2 id="å®‰è£…è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦"></a>å®‰è£…è¯ä¹¦</h2><p>æˆ‘æ‰“ç®—æŠŠè¯ä¹¦ä¿å­˜åœ¨ <code>/etc/nginx/ssl/&lt;domain&gt;</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºè¯¥ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/nginx/ssl/sxzz.moe/ <span class="comment">#ç›´æ¥åˆ›å»ºå¤šçº§ç›®å½•</span></span><br><span class="line">acme.sh --installcert -d sxzz.moe \</span><br><span class="line">        --key-file /etc/nginx/ssl/sxzz.moe/sxzz.moe.key \</span><br><span class="line">        --fullchain-file /etc/nginx/ssl/sxzz.moe/sxzz.moe.pem \</span><br><span class="line">        --reloadcmd  <span class="string">&quot;service nginx force-reload&quot;</span> <span class="comment"># è¯ä¹¦æ›´æ–°åä¼šè‡ªåŠ¨é‡è½½æœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œè¿™äº›å‘½ä»¤åï¼Œè¯ä¹¦ä¼šè‡ªåŠ¨æ‹·è´åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œå¹¶ä¸”ä»¥åè‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼ˆ60 å¤©ï¼‰å°±ä¼šè‡ªåŠ¨æŒ‰ç…§è¿™äº›å‚æ•°è¿è¡Œã€‚</p><blockquote><p>å®˜æ–¹æç¤ºï¼šè¿™é‡Œç”¨çš„æ˜¯ <code>service nginx force-reload</code>ï¼Œä¸æ˜¯ <code>service nginx reload</code>ï¼Œæ®æµ‹è¯•, <code>reload</code> å¹¶ä¸ä¼šé‡æ–°åŠ è½½è¯ä¹¦ï¼Œæ‰€ä»¥ç”¨çš„ <code>force-reload</code>ã€‚</p></blockquote><h2 id="é…ç½®-Nginx"><a href="#é…ç½®-Nginx" class="headerlink" title="é…ç½® Nginx"></a>é…ç½® Nginx</h2><p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ Nginx ä½œä¸º Web æœåŠ¡å™¨ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é…ç½®ï¼Œä»…ä¾›å‚è€ƒã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/nginx/ssl/sxzz.moe/sxzz.moe.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/nginx/ssl/sxzz.moe/sxzz.moe.key;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_ciphers</span> EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_stapling</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">add_header</span> Strict-Transport-Security max-age=<span class="number">15552000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">root</span> /var/www/sxzz.moe;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">    <span class="attribute">server_name</span> sxzz.moe;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="comment"># First attempt to serve request as file, then</span></span><br><span class="line">        <span class="comment"># as directory, then fall back to displaying a 404.</span></span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯ä¸€ä¸‹ Nginxï¼Œå¤§åŠŸå‘Šæˆï¼</p><h2 id="è‡ªåŠ¨æ›´æ–°-acme-shï¼ˆå¼•ç”¨è‡ªå®˜æ–¹-Wikiï¼‰"><a href="#è‡ªåŠ¨æ›´æ–°-acme-shï¼ˆå¼•ç”¨è‡ªå®˜æ–¹-Wikiï¼‰" class="headerlink" title="è‡ªåŠ¨æ›´æ–° acme.shï¼ˆå¼•ç”¨è‡ªå®˜æ–¹ Wikiï¼‰"></a>è‡ªåŠ¨æ›´æ–° acme.shï¼ˆå¼•ç”¨è‡ªå®˜æ–¹ Wikiï¼‰</h2><p>ç›®å‰ç”±äº acme åè®®å’Œ Letâ€™s Encrypt CA éƒ½åœ¨é¢‘ç¹çš„æ›´æ–°, å› æ­¤ acme.sh ä¹Ÿç»å¸¸æ›´æ–°ä»¥ä¿æŒåŒæ­¥ã€‚</p><p>å‡çº§ acme.sh åˆ°æœ€æ–°ç‰ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨å‡çº§ï¼Œå¯ä»¥å¼€å¯è‡ªåŠ¨å‡çº§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade --auto-upgrade</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œacme.sh å°±ä¼šè‡ªåŠ¨ä¿æŒæ›´æ–°äº†ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥éšæ—¶å…³é—­è‡ªåŠ¨æ›´æ–°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade --auto-upgrade 0</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E">å®˜æ–¹ä¸­æ–‡ Wiki</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœåŠ¡å™¨ç¯å¢ƒï¼šUbuntu 16.04 + Nginx&lt;/p&gt;</summary>
    
    
    
    
    <category term="web" scheme="https://blog.sxzz.moe/tags/web/"/>
    
    <category term="https" scheme="https://blog.sxzz.moe/tags/https/"/>
    
  </entry>
  
</feed>
